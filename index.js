!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueCoreImageUpload=e():t.VueCoreImageUpload=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var o,n;i(1),o=i(5),n=i(42),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options:t.exports).template=n)},function(t,e,i){var o=i(2);"string"==typeof o&&(o=[[t.id,o,""]]);i(4)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,i){e=t.exports=i(3)(),e.push([t.id,".g-core-image-upload-btn{position:relative;overflow:hidden}.g-core-image-upload-form{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0}.g-core-image-upload-container{position:absolute;background:#111;z-index:900}.g-core-image-upload-modal{position:absolute;left:0;right:0;width:100%;height:100%;border:1px solid #ccc;z-index:899}.dropped{border:4px solid #ea6153}.g-core-image-corp-container{z-index:1900;position:fixed;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,.9);color:#f1f1f1}.g-core-image-corp-container .image-aside{overflow:hidden;position:absolute;right:30px;left:30px;top:60px;bottom:20px;text-align:center}.g-core-image-corp-container .image-aside img{max-width:100%}.g-core-image-corp-container .info-aside{position:absolute;left:0;right:0;top:0;height:40px;padding-left:10px;padding-right:10px;background:#fefefe;color:#777}.g-core-image-corp-container .info-aside .image-corp-preview{position:relative;overflow:hidden;text-align:center;border:2px solid #ccc}.g-core-image-corp-container .info-aside .image-corp-preview.circled{border-radius:160px}.g-core-image-corp-container .info-aside .image-corp-preview img{width:100%}.g-core-image-corp-container .info-aside .config-info .image-details{width:100%;color:#999}.g-core-image-corp-container .info-aside .config-info .image-details td{border:none;line-height:24px}.g-core-image-corp-container .info-aside .config-info .image-details tr td:first-child{width:36%}.g-core-image-corp-container .info-aside .config-info .image-details tr td:last-child{color:#555}.g-core-image-corp-container .btn-groups{text-align:right;margin:5px 0 0}.g-core-image-corp-container .btn{display:inline-block;padding:0 15px;height:32px;margin-left:15px;background:#fff;border:1px solid #ccc;border-radius:2px;font-size:13px;color:#222;line-height:32px;-webkit-transition:all .1s ease-in;transition:all .1s ease-in}.g-core-image-corp-container .btn:hover{border:1px solid #777;box-shadow:0 1px 3px rgba(0,0,0,.05)},.g-core-image-corp-container .btn:active{background:#ddd}.g-core-image-corp-container .btn:disabled{background:#eee!important;border-color:#ccc;cursor:not-allowed}.g-core-image-corp-container .btn-upload{background:#27ae60;border-color:#27ae60;color:#fff}.g-core-image-corp-container .btn-upload:hover{background:#2dc26c;border-color:#27ae60;box-shadow:0 1px 3px rgba(0,0,0,.05)}.g-core-image-corp-container .g-crop-image-box,.g-core-image-corp-container .g-crop-image-box .g-crop-image-principal{position:relative}.g-core-image-corp-container .g-crop-image-box .select-recorte{position:absolute;background:#fff;opacity:.5;border:2px dashed #555;cursor:move}.g-core-image-corp-container .g-resize{z-index:90;position:absolute;bottom:1px;right:1px;width:20px;height:20px;cursor:se-resize}.g-core-image-corp-container .g-e-resize{cursor:e-resize;position:absolute;width:7px;right:-5px;top:0;height:100%}.g-core-image-corp-container .g-s-resize{position:absolute;cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(o[r]=!0)}for(n=0;n<e.length;n++){var s=e[n];"number"==typeof s[0]&&o[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(t,e,i){function o(t,e){for(var i=0;i<t.length;i++){var o=t[i],n=u[o.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](o.parts[r]);for(;r<o.parts.length;r++)n.parts.push(p(o.parts[r],e))}else{for(var s=[],r=0;r<o.parts.length;r++)s.push(p(o.parts[r],e));u[o.id]={id:o.id,refs:1,parts:s}}}}function n(t){for(var e=[],i={},o=0;o<t.length;o++){var n=t[o],r=n[0],s=n[1],a=n[2],c=n[3],p={css:s,media:a,sourceMap:c};i[r]?i[r].parts.push(p):e.push(i[r]={id:r,parts:[p]})}return e}function r(t,e){var i=A(),o=y[y.length-1];if("top"===t.insertAt)o?o.nextSibling?i.insertBefore(e,o.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function c(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function p(t,e){var i,o,n;if(e.singleton){var r=w++;i=m||(m=a(e)),o=l.bind(null,i,r,!1),n=l.bind(null,i,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=c(e),o=d.bind(null,i),n=function(){s(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),o=h.bind(null,i),n=function(){s(i)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else n()}}function l(t,e,i,o){var n=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=v(e,n);else{var r=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function h(t,e){var i=e.css,o=e.media;e.sourceMap;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function d(t,e){var i=e.css,o=(e.media,e.sourceMap);o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var u={},g=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=g(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),A=g(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,w=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=n(t);return o(i,e),function(t){for(var r=[],s=0;s<i.length;s++){var a=i[s],c=u[a.id];c.refs--,r.push(c)}if(t){var p=n(t);o(p,e)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete u[c.id]}}}};var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(6),r=o(n),s=i(38),a=o(s),c=i(39),p=o(c),l=function(t,e,i,o,n,r){function s(t){for(var e,i={},o=/([a-z\-]+):\s?(.*);?/gi;e=o.exec(t);)i[e[1]]=e[2];return i}var a=new XMLHttpRequest,r=r||function(){console.error("AJAX ERROR!")},c=!1;"blob"===t&&(c=t,t="GET"),t=t.toUpperCase(),a.onload=function(e){var i=a.response;try{i=JSON.parse(a.responseText)}catch(o){401===a.status&&(i=r("access_denied",a.statusText))}var c=s(a.getAllResponseHeaders());c.statusCode=a.status,n(i||("GET"===t?r("empty_response","Could not get resource"):{}),c)},a.onerror=function(t){var e=a.responseText;try{e=JSON.parse(a.responseText)}catch(i){}n(e||r("access_denied","Could not get resource"))};var p;if("GET"===t||"DELETE"===t)o=null;else if(o&&"string"!=typeof o&&!(o instanceof FormData)&&!(o instanceof File)&&!(o instanceof Blob)){var l=new FormData;for(p in o)o.hasOwnProperty(p)&&(o[p]instanceof HTMLInputElement?"files"in o[p]&&o[p].files.length>0&&l.append(p,o[p].files[0]):o[p]instanceof Blob?l.append(p,o[p],o.name):l.append(p,o[p]));o=l}if(a.open(t,e,!0),c&&("responseType"in a?a.responseType=c:a.overrideMimeType("text/plain; charset=x-user-defined")),i)for(p in i)a.setRequestHeader(p,i[p]);return a.send(o),a},h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=function(){function t(e,i,o,n){(0,a["default"])(this,t),n.stopPropagation(),this.coor={x:h?n.touches[0].clientX:n.clientX,y:h?n.touches[0].clientY:n.clientY,w:parseInt(window.getComputedStyle(e).width),h:parseInt(window.getComputedStyle(e).height)},this.splitX=o.split(":")[0],this.splitY=o.split(":")[1],this.el=e,this.container=i,h&&this.container.addEventListener("touchmove",this.drag.bind(this),!1),this.container.addEventListener("mousemove",this.drag.bind(this),!1)}return(0,p["default"])(t,[{key:"drag",value:function(t){if(this.el){var e=document.querySelector(".g-crop-image-principal"),i=document.querySelector(".info-aside"),o=parseInt(document.body.offsetWidth)-parseInt(window.getComputedStyle(e).width),n=parseInt(document.body.offsetHeight)-parseInt(window.getComputedStyle(e).height)-parseInt(window.getComputedStyle(i).height),r=h?t.changedTouches[0].clientX:t.clientX,s=h?t.changedTouches[0].clientY:t.clientY;if(this.splitX>this.splitY){if(parseInt(r)>=o/2+parseInt(window.getComputedStyle(e).width))return;if(parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width)&&(this.el.style.width=window.getComputedStyle(e).width),this.el.style.width=this.coor.w+(h?t.changedTouches[0].clientX:t.clientX)-this.coor.x+"px",this.el.style.height=parseInt(this.el.style.width)*(this.splitY/this.splitX)+"px",parseInt(window.getComputedStyle(e).width)>parseInt(window.getComputedStyle(e).height)){if(parseInt(this.el.style.height)>=parseInt(window.getComputedStyle(e).height))return this.el.style.height=window.getComputedStyle(e).height,void(this.el.style.width=parseInt(window.getComputedStyle(e).height)*(this.splitX/this.splitY)+"px")}else if(parseInt(window.getComputedStyle(e).width)<parseInt(window.getComputedStyle(e).height)){if(parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width))return this.el.style.width=window.getComputedStyle(e).width,void(this.el.style.height=parseInt(window.getComputedStyle(e).width)*(this.splitY/this.splitX)+"px")}else if(parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width))return this.el.style.width=window.getComputedStyle(e).width,void(this.el.style.height=parseInt(window.getComputedStyle(e).width)*(this.splitY/this.splitX)+"px")}else if(this.splitX<this.splitY){if(parseInt(s)>=n/2+parseInt(window.getComputedStyle(e).height)+parseInt(window.getComputedStyle(i).height))return;if(this.el.style.height=this.coor.h+(h?t.changedTouches[0].clientY:t.clientY)-this.coor.y+"px",this.el.style.width=parseInt(this.el.style.height)*(this.splitX/this.splitY)+"px",parseInt(window.getComputedStyle(e).width)>parseInt(window.getComputedStyle(e).height)){if(parseInt(this.el.style.height)>=parseInt(window.getComputedStyle(e).height))return this.el.style.height=window.getComputedStyle(e).height,void(this.el.style.width=parseInt(window.getComputedStyle(e).height)*(this.splitX/this.splitY)+"px")}else if(parseInt(window.getComputedStyle(e).width)<parseInt(window.getComputedStyle(e).height)){if(parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width))return this.el.style.width=window.getComputedStyle(e).width,void(this.el.style.height=parseInt(window.getComputedStyle(e).width)*(this.splitY/this.splitX)+"px")}else if(parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width))return this.el.style.width=window.getComputedStyle(e).width,void(this.el.style.height=parseInt(window.getComputedStyle(e).width)*(this.splitY/this.splitX)+"px")}else{if(parseInt(r)>=o/2+parseInt(window.getComputedStyle(e).width))return;this.el.style.width=this.coor.w+(h?t.changedTouches[0].clientX:t.clientX)-this.coor.x+"px",this.el.style.height=this.el.style.width,parseInt(window.getComputedStyle(e).width)>parseInt(window.getComputedStyle(e).height)?parseInt(this.el.style.height)>=parseInt(window.getComputedStyle(e).height)&&(this.el.style.height=window.getComputedStyle(e).height,this.el.style.width=window.getComputedStyle(e).height):parseInt(window.getComputedStyle(e).width)<parseInt(window.getComputedStyle(e).height)?parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width)&&(this.el.style.width=window.getComputedStyle(e).width,this.el.style.height=window.getComputedStyle(e).width):parseInt(this.el.style.width)>=parseInt(window.getComputedStyle(e).width)&&(this.el.style.width=this.el.style.height=window.getComputedStyle(e).width)}h?this.container.addEventListener("touchend",this.stopDrag.bind(this),!1):this.container.addEventListener("mouseup",this.stopDrag.bind(this),!1)}}},{key:"stopDrag",value:function(t){this.el=null,this.container=null}}]),t}(),u=function(){function t(e,i,o){return(0,a["default"])(this,t),this.el=e,this.container=i,this.coor={x:(h?o.touches[0].clientX:o.clientX)-e.offsetLeft-e.parentElement.offsetLeft,y:(h?o.touches[0].clientY:o.clientY)-e.offsetTop-e.parentElement.offsetTop,posX:h?o.touches[0].clientX:o.clientX,posy:h?o.touches[0].clientY:o.clientY,maxLeft:parseInt(this.container.style.width)-parseInt(this.el.style.width),maxTop:parseInt(this.container.style.height)-parseInt(this.el.style.height)},h?(this.container.addEventListener("touchmove",this.move.bind(this),!1),void this.container.addEventListener("touchend",this.stopMove.bind(this),!1)):(this.container.addEventListener("mousemove",this.move.bind(this),!1),void this.container.addEventListener("mouseup",this.stopMove.bind(this),!1))}return(0,p["default"])(t,[{key:"move",value:function(t){if(this.el){this.coor.posX=h?t.changedTouches[0].clientX:t.clientX,this.coor.posY=h?t.changedTouches[0].clientY:t.clientY;var e=this.coor.posX-this.coor.x,i=this.coor.posY-this.coor.y;0>=e&&(e=0),e>=this.coor.maxLeft&&(e=this.coor.maxLeft),0>=i&&(i=0),i>=this.coor.maxTop&&(i=this.coor.maxTop),this.el.style.left=e+"px",this.el.style.top=i+"px"}}},{key:"stopMove",value:function(){return this.el=null,h?(this.container.removeEventListener("touchmove",this.move.bind(this),!1),void this.container.removeEventListener("touchend",this.stopMove.bind(this),!1)):(this.container.removeEventListener("mousemove",this.move.bind(this),!1),void this.container.removeEventListener("mouseup",this.stopMove.bind(this),!1))}}]),t}(),g="data:image/gif;base64,R0lGODlhGAAYAPQAAP///3FxcePj4/v7++3t7dLS0vHx8b+/v+Dg4MfHx+jo6M7Oztvb2/f397Kysru7u9fX16qqqgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==";e["default"]={props:{url:{type:String},text:{type:String,"default":"Upload Image"},"class":{type:Array,"default":[]},extensions:{type:String,"default":"png.jpg,jpeg,gif,svg,webp"},inputOfFile:{type:String,"default":"files"},crop:{type:Boolean,"default":!1},cropRatio:{type:String,"default":"1:1"},maxFileSize:{type:Number,"default":104857600},maxWidth:{type:Number},maxHeight:{type:Number},inputAccept:{type:String,"default":"image/*"}},data:function(){return{files:[],hasImage:!1,options:this.props,uploading:!1,formID:(1e4*Math.random()+"").split(".")[0],image:{src:g,width:24,height:24}}},methods:{__dispatch:function(t,e){this.$dispatch&&this.$dispatch(t,e),this.events&&this.events[t]&&this.events[t](e)},__find:function(t){var e=document.querySelector("#vciu-modal-"+this.formID);return e.querySelector(t)},change:function(t){var e=document.querySelector("#g-core-upload-input-"+this.formID).value.replace(/C:\\fakepath\\/i,""),i=e.substring(e.lastIndexOf(".")+1),o=this.extensions.split(",");if(o.length>1){var n=new RegExp("^["+o.join("|")+"]+$","i");if(!n.test(i))return this.__dispatch("errorHandle","TYPE ERROR")}if(t.target.files[0].size>this.maxFileSize){var r;return r=parseInt(this.maxFileSize/1024/1024)>0?(this.maxFileSize/1024/1024).toFixed(2)+"MB":parseInt(this.maxFileSize/1024)>0?(this.maxFileSize/1024).toFixed(2)+"kB":options.maxFileSize.toFixed(2)+"Byte",void this.errorHandle("FILE IS TOO LARGER MAX FILE IS "+r)}return this.files=t.target.files,this.crop?void this.__showImage():void this.tryAjaxUpload()},__showImage:function(){this.hasImage=!0,this.__readFiles()},__readFiles:function(){var t=new FileReader,e=this;t.onload=function(t){var i=t.target.result;e.__initImage(i)},t.readAsDataURL(this.files[0])},__initImage:function(t){var e=new Image,i=this;e.src=t,e.onload=function(){i.image.src=t,i.image.width=e.naturalWidth,i.image.height=e.naturalHeight,i.__reseyLayout(),i.__initCropBox()}},__initCropBox:function(){var t=document.querySelector("#vciu-modal-"+this.formID),e=t.querySelector(".select-recorte"),i=t.querySelector(".g-crop-image-principal"),o=parseInt(i.style.width),n=parseInt(i.style.height),r=this.cropRatio.split(":")[0],s=this.cropRatio.split(":")[1],a=o/100*80,c=a/r*s;e.style.cssText="width:"+a+"px;height: "+c+"px;left:"+(o-a)/2+"px;top:"+(n-c)/2+"px;",c>n&&(c=n/100*80,a=c*r/s,e.style.cssText="width:"+a+"px;height:"+c+"px;left:"+(o-a)/2+"px;top:"+(n-c)/2+"px")},__reseyLayout:function(){var t=window.innerHeight-80,e=window.innerWidth-60,i=this.image.width,o=this.image.height,n=i/o,r=e/t,s=document.querySelector("#vciu-modal-"+this.formID),a=s.querySelector(".g-crop-image-principal");n>r?(this.image.width=e,this.image.height=e/n,a.style.cssText="width:"+e+"px;height:"+e/n+"px;margin-top:"+(t-e/n)/2+"px"):(this.image.width=t*n,this.image.height=t,a.style.cssText="width:"+t*n+"px;height:"+t+"px;margin-left:"+(e-t*n)/2+"px;"),this.imgChangeRatio=i/this.image.width},doCrop:function(t){var e=t.target;e.value=e.value+"...",e.disabled=!0,"object"!==(0,r["default"])(this.data)&&(this.data={});var i=this.__find(".select-recorte");this.data.request="crop",this.data.toCropImgX=parseInt(window.getComputedStyle(i).left)*this.imgChangeRatio,this.data.toCropImgY=parseInt(window.getComputedStyle(i).top)*this.imgChangeRatio,this.data.toCropImgW=parseInt(window.getComputedStyle(i).width)*this.imgChangeRatio,this.data.toCropImgH=parseInt(window.getComputedStyle(i).height)*this.imgChangeRatio,this.tryAjaxUpload(function(){e.value=e.value.replace("...",""),e.disabled=!1})},cancel:function(){this.hasImage=!1,this.files="",document.querySelector("#g-core-upload-input-"+this.formID).value=""},tryAjaxUpload:function(t){for(var e=this,i=new FormData,o=0;o<this.files.length;o++)i.append(e.inputOfFile,this.files[o]);if("object"===(0,r["default"])(this.data))for(var n in this.data)void 0!==this.data[n]&&i.append(n,this.data[n]);this.__dispatch("imageuploading",this.files),l("POST",this.url,{},i,function(i){"function"==typeof t&&t(),e.uploading=!1,e.crop&&(e.hasImage=!1),e.__dispatch("imageuploaded",i)})},resize:function(t){var e=t.target.parentElement,i=this.__find(".g-crop-image-principal");new d(e,i,this.cropRatio,t)},drag:function(t){var e=t.target,i=this.__find(".g-crop-image-principal");new u(e,i,t)}}}},function(t,e,i){"use strict";var o=i(7)["default"];e["default"]=function(t){return t&&t.constructor===o?"symbol":typeof t},e.__esModule=!0},function(t,e,i){t.exports={"default":i(8),__esModule:!0}},function(t,e,i){i(9),i(37),t.exports=i(16).Symbol},function(t,e,i){"use strict";var o=i(10),n=i(11),r=i(12),s=i(13),a=i(15),c=i(19),p=i(14),l=i(22),h=i(23),d=i(25),u=i(24),g=i(26),f=i(31),A=i(32),m=i(33),w=i(34),y=i(27),v=i(21),x=o.getDesc,C=o.setDesc,b=o.create,I=f.get,S=n.Symbol,B=n.JSON,Q=B&&B.stringify,E=!1,D=u("_hidden"),M=o.isEnum,k=l("symbol-registry"),O=l("symbols"),R="function"==typeof S,j=Object.prototype,L=s&&p(function(){return 7!=b(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,i){var o=x(j,e);o&&delete j[e],C(t,e,i),o&&t!==j&&C(j,e,o)}:C,Y=function(t){var e=O[t]=b(S.prototype);return e._k=t,s&&E&&L(j,t,{configurable:!0,set:function(e){r(this,D)&&r(this[D],t)&&(this[D][t]=!1),L(this,t,v(1,e))}}),e},G=function(t){return"symbol"==typeof t},N=function(t,e,i){return i&&r(O,e)?(i.enumerable?(r(t,D)&&t[D][e]&&(t[D][e]=!1),i=b(i,{enumerable:v(0,!1)})):(r(t,D)||C(t,D,v(1,{})),t[D][e]=!0),L(t,e,i)):C(t,e,i)},H=function(t,e){w(t);for(var i,o=A(e=y(e)),n=0,r=o.length;r>n;)N(t,i=o[n++],e[i]);return t},_=function(t,e){return void 0===e?b(t):H(b(t),e)},T=function(t){var e=M.call(this,t);return e||!r(this,t)||!r(O,t)||r(this,D)&&this[D][t]?e:!0},J=function(t,e){var i=x(t=y(t),e);return!i||!r(O,e)||r(t,D)&&t[D][e]||(i.enumerable=!0),i},F=function(t){for(var e,i=I(y(t)),o=[],n=0;i.length>n;)r(O,e=i[n++])||e==D||o.push(e);return o},U=function(t){for(var e,i=I(y(t)),o=[],n=0;i.length>n;)r(O,e=i[n++])&&o.push(O[e]);return o},P=function(t){if(void 0!==t&&!G(t)){for(var e,i,o=[t],n=1,r=arguments;r.length>n;)o.push(r[n++]);return e=o[1],"function"==typeof e&&(i=e),!i&&m(e)||(e=function(t,e){return i&&(e=i.call(this,t,e)),G(e)?void 0:e}),o[1]=e,Q.apply(B,o)}},q=p(function(){var t=S();return"[null]"!=Q([t])||"{}"!=Q({a:t})||"{}"!=Q(Object(t))});R||(S=function(){if(G(this))throw TypeError("Symbol is not a constructor");return Y(d(arguments.length>0?arguments[0]:void 0))},c(S.prototype,"toString",function(){return this._k}),G=function(t){return t instanceof S},o.create=_,o.isEnum=T,o.getDesc=J,o.setDesc=N,o.setDescs=H,o.getNames=f.get=F,o.getSymbols=U,s&&!i(36)&&c(j,"propertyIsEnumerable",T,!0));var z={"for":function(t){return r(k,t+="")?k[t]:k[t]=S(t)},keyFor:function(t){return g(k,t)},useSetter:function(){E=!0},useSimple:function(){E=!1}};o.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=u(t);z[t]=R?e:Y(e)}),E=!0,a(a.G+a.W,{Symbol:S}),a(a.S,"Symbol",z),a(a.S+a.F*!R,"Object",{create:_,defineProperty:N,defineProperties:H,getOwnPropertyDescriptor:J,getOwnPropertyNames:F,getOwnPropertySymbols:U}),B&&a(a.S+a.F*(!R||q),"JSON",{stringify:P}),h(S,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){t.exports=!i(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,i){var o=i(11),n=i(16),r=i(17),s="prototype",a=function(t,e,i){var c,p,l,h=t&a.F,d=t&a.G,u=t&a.S,g=t&a.P,f=t&a.B,A=t&a.W,m=d?n:n[e]||(n[e]={}),w=d?o:u?o[e]:(o[e]||{})[s];d&&(i=e);for(c in i)p=!h&&w&&c in w,p&&c in m||(l=p?w[c]:i[c],m[c]=d&&"function"!=typeof w[c]?i[c]:f&&p?r(l,o):A&&w[c]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):g&&"function"==typeof l?r(Function.call,l):l,g&&((m[s]||(m[s]={}))[c]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},function(t,e,i){var o=i(18);t.exports=function(t,e,i){if(o(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,o){return t.call(e,i,o)};case 3:return function(i,o,n){return t.call(e,i,o,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){t.exports=i(20)},function(t,e,i){var o=i(10),n=i(21);t.exports=i(13)?function(t,e,i){return o.setDesc(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var o=i(11),n="__core-js_shared__",r=o[n]||(o[n]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){var o=i(10).setDesc,n=i(12),r=i(24)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,r)&&o(t,r,{configurable:!0,value:e})}},function(t,e,i){var o=i(22)("wks"),n=i(25),r=i(11).Symbol;t.exports=function(t){return o[t]||(o[t]=r&&r[t]||(r||n)("Symbol."+t))}},function(t,e){var i=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+o).toString(36))}},function(t,e,i){var o=i(10),n=i(27);t.exports=function(t,e){for(var i,r=n(t),s=o.getKeys(r),a=s.length,c=0;a>c;)if(r[i=s[c++]]===e)return i}},function(t,e,i){var o=i(28),n=i(30);t.exports=function(t){return o(n(t))}},function(t,e,i){var o=i(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var o=i(27),n=i(10).getNames,r={}.toString,s="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return n(t)}catch(e){return s.slice()}};t.exports.get=function(t){return s&&"[object Window]"==r.call(t)?a(t):n(o(t))}},function(t,e,i){var o=i(10);t.exports=function(t){var e=o.getKeys(t),i=o.getSymbols;if(i)for(var n,r=i(t),s=o.isEnum,a=0;r.length>a;)s.call(t,n=r[a++])&&e.push(n);return e}},function(t,e,i){var o=i(29);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,i){var o=i(35);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=!0},function(t,e){},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=i(40),r=o(n);e["default"]=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,r["default"])(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}()},function(t,e,i){t.exports={"default":i(41),__esModule:!0}},function(t,e,i){var o=i(10);t.exports=function(t,e,i){return o.setDesc(t,e,i)}},function(t,e){t.exports='<div class=g-core-image-upload-btn v-bind:class=class> {{text}} <form class=g-core-image-upload-form v-show=!hasImage method=post enctype=multipart/form-data action=/api2/common_user/cropHeadUrl style=display:block;cursor:pointer;position:absolute;left:0;top:0;width:1242px;height:61px;opacity:0;margin:0;padding:0;overflow:hidden> <input v-bind:disabled=uploading id=g-core-upload-input-{{formID}} name={{inputOfFile}} type=file accept={{inputAccept}} v-on:change=change style=width:100%;height:100%> </form> </div> <div class=g-core-image-corp-container id=vciu-modal-{{formID}} v-show=hasImage> <div class=image-aside> <div class=g-crop-image-box> <div class=g-crop-image-principal> <img v-bind:src=image.src v-bind:style="{ width:image.width + \'px\',height: image.height + \'px\' }"> <div class=select-recorte v-on:touchstart=drag v-on:mousedown=drag style=width:100px;height:100px> <div class=g-s-resize style=z-index:90></div> <div class=g-e-resize style=z-index:90></div> <div class=g-resize v-on:touchstart=resize v-on:mousedown=resize></div> </div> </div> </div> </div> <div class=info-aside> <p class=btn-groups> <button type=button v-on:click=doCrop class="btn btn-upload">确定</button> <button type=button v-on:click=cancel() class="btn btn-cancel">取消</button> </p> </div> </div>'}])});